{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\Qubis\\\\frontend\\\\src\\\\components\\\\SnapshotModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"../i18n\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SnapshotModal({\n  visible,\n  onClose,\n  vm,\n  onRefresh,\n  darkMode = false\n}) {\n  _s();\n  const [snapshots, setSnapshots] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const {\n    t\n  } = useTranslation();\n  useEffect(() => {\n    if (visible && vm) {\n      fetchSnapshots(vm.name);\n    }\n  }, [visible, vm]);\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.key === \"Escape\") onClose === null || onClose === void 0 ? void 0 : onClose();\n    };\n    if (visible) {\n      window.addEventListener(\"keydown\", handleKeyDown);\n    }\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [visible, onClose]);\n  const fetchSnapshots = async vmName => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      const res = await fetch(`http://localhost:5000/api/vm/${vmName}/snapshots`);\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || t(\"snapshot_y√ºkleme_hatasƒ±\"));\n      setSnapshots(data.snapshots || []);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRestore = async snapshotName => {\n    if (!window.confirm(`${t(\"geri_y√ºkle_onay\")} \"${snapshotName}\"?`)) return;\n    try {\n      const res = await fetch(`http://localhost:5000/api/vm/${vm.name}/restore`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          snapshot: snapshotName\n        })\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || t(\"geri_y√ºkleme_hatasƒ±\"));\n      alert(`‚úÖ ${t(\"geri_y√ºklendi\")}: ${snapshotName}`);\n      onClose();\n      onRefresh();\n    } catch (err) {\n      alert(`‚ùå ${err.message}`);\n    }\n  };\n  if (!visible || !vm) return null;\n  const modalClasses = darkMode ? \"bg-gray-900 text-white border border-gray-700\" : \"bg-white text-black border border-gray-200\";\n  const listItemBg = darkMode ? \"bg-gray-800 hover:bg-gray-700\" : \"bg-gray-100 hover:bg-gray-200\";\n  const textMuted = darkMode ? \"text-gray-400\" : \"text-gray-500\";\n  const errorText = darkMode ? \"text-red-400\" : \"text-red-600\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay backdrop-blur-sm bg-black/60\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `rounded-lg shadow-lg p-6 w-[400px] max-h-[80vh] overflow-y-auto ${modalClasses}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4\",\n        children: [\"\\uD83D\\uDCF8 \", vm.name, \" - \", t(\"snapshotlar\")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: t(\"y√ºkleniyor\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `${errorText} text-sm`,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }, this), snapshots.length === 0 && !loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `${textMuted}`,\n        children: t(\"snapshot_bulunamadƒ±\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-2\",\n        children: snapshots.map(snap => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `flex justify-between items-center px-3 py-2 rounded-md transition ${listItemBg}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm font-medium truncate\",\n            children: snap\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-blue-400 hover:underline text-sm\",\n            onClick: () => handleRestore(snap),\n            children: t(\"geri_y√ºkle\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)]\n        }, snap, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 text-right\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-4 py-1 bg-gray-700 text-white rounded hover:bg-gray-800\",\n          onClick: onClose,\n          children: t(\"kapat\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(SnapshotModal, \"MLYce/awyfnsCuasbkkEtbbPGoY=\", false, function () {\n  return [useTranslation];\n});\n_c = SnapshotModal;\nvar _c;\n$RefreshReg$(_c, \"SnapshotModal\");","map":{"version":3,"names":["React","useEffect","useState","useTranslation","jsxDEV","_jsxDEV","SnapshotModal","visible","onClose","vm","onRefresh","darkMode","_s","snapshots","setSnapshots","loading","setLoading","error","setError","t","fetchSnapshots","name","handleKeyDown","e","key","window","addEventListener","removeEventListener","vmName","res","fetch","data","json","ok","Error","err","message","handleRestore","snapshotName","confirm","method","headers","body","JSON","stringify","snapshot","alert","modalClasses","listItemBg","textMuted","errorText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","snap","onClick","_c","$RefreshReg$"],"sources":["C:/Users/admin/Desktop/Qubis/frontend/src/components/SnapshotModal.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"../i18n\";\r\n\r\nexport default function SnapshotModal({ visible, onClose, vm, onRefresh, darkMode = false }) {\r\n  const [snapshots, setSnapshots] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    if (visible && vm) {\r\n      fetchSnapshots(vm.name);\r\n    }\r\n  }, [visible, vm]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === \"Escape\") onClose?.();\r\n    };\r\n\r\n    if (visible) {\r\n      window.addEventListener(\"keydown\", handleKeyDown);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  }, [visible, onClose]);\r\n\r\n  const fetchSnapshots = async (vmName) => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/vm/${vmName}/snapshots`);\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || t(\"snapshot_y√ºkleme_hatasƒ±\"));\r\n      setSnapshots(data.snapshots || []);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRestore = async (snapshotName) => {\r\n    if (!window.confirm(`${t(\"geri_y√ºkle_onay\")} \"${snapshotName}\"?`)) return;\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/vm/${vm.name}/restore`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ snapshot: snapshotName }),\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || t(\"geri_y√ºkleme_hatasƒ±\"));\r\n      alert(`‚úÖ ${t(\"geri_y√ºklendi\")}: ${snapshotName}`);\r\n      onClose();\r\n      onRefresh();\r\n    } catch (err) {\r\n      alert(`‚ùå ${err.message}`);\r\n    }\r\n  };\r\n\r\n  if (!visible || !vm) return null;\r\n\r\n  const modalClasses = darkMode\r\n    ? \"bg-gray-900 text-white border border-gray-700\"\r\n    : \"bg-white text-black border border-gray-200\";\r\n\r\n  const listItemBg = darkMode ? \"bg-gray-800 hover:bg-gray-700\" : \"bg-gray-100 hover:bg-gray-200\";\r\n  const textMuted = darkMode ? \"text-gray-400\" : \"text-gray-500\";\r\n  const errorText = darkMode ? \"text-red-400\" : \"text-red-600\";\r\n\r\n  return (\r\n    <div className=\"modal-overlay backdrop-blur-sm bg-black/60\">\r\n      <div className={`rounded-lg shadow-lg p-6 w-[400px] max-h-[80vh] overflow-y-auto ${modalClasses}`}>\r\n        <h2 className=\"text-xl font-bold mb-4\">üì∏ {vm.name} - {t(\"snapshotlar\")}</h2>\r\n\r\n        {loading && <p>{t(\"y√ºkleniyor\")}</p>}\r\n        {error && <p className={`${errorText} text-sm`}>{error}</p>}\r\n\r\n        {snapshots.length === 0 && !loading ? (\r\n          <p className={`${textMuted}`}>{t(\"snapshot_bulunamadƒ±\")}</p>\r\n        ) : (\r\n          <ul className=\"space-y-2\">\r\n            {snapshots.map((snap) => (\r\n              <li key={snap} className={`flex justify-between items-center px-3 py-2 rounded-md transition ${listItemBg}`}>\r\n                <span className=\"text-sm font-medium truncate\">{snap}</span>\r\n                <button className=\"text-blue-400 hover:underline text-sm\" onClick={() => handleRestore(snap)}>\r\n                  {t(\"geri_y√ºkle\")}\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n        <div className=\"mt-6 text-right\">\r\n          <button className=\"px-4 py-1 bg-gray-700 text-white rounded hover:bg-gray-800\" onClick={onClose}>\r\n            {t(\"kapat\")}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}